[gd_scene load_steps=17 format=2]

[ext_resource path="res://meshes/libraries/scenery.tres" type="MeshLibrary" id=1]
[ext_resource path="res://scripts/CinematicCamera.gd" type="Script" id=2]
[ext_resource path="res://scripts/GroundCollision.gd" type="Script" id=3]
[ext_resource path="res://scripts/ui/PauseController.gd" type="Script" id=4]
[ext_resource path="res://scripts/VFXController.gd" type="Script" id=5]
[ext_resource path="res://scripts/Camera.gd" type="Script" id=6]
[ext_resource path="res://scripts/TrainController.gd" type="Script" id=7]
[ext_resource path="res://_raw/models/logo.glb" type="PackedScene" id=8]
[ext_resource path="res://scenes/objects/track-straight.tscn" type="PackedScene" id=9]
[ext_resource path="res://scenes/ui/hud.tscn" type="PackedScene" id=10]
[ext_resource path="res://scenes/objects/enemy-turret-small.tscn" type="PackedScene" id=11]
[ext_resource path="res://meshes/libraries/terrain.tres" type="MeshLibrary" id=12]
[ext_resource path="res://environments/default.tres" type="Environment" id=13]
[ext_resource path="res://_raw/audio/music-zinia.mp3" type="AudioStream" id=14]
[ext_resource path="res://scripts/WinLossController.gd" type="Script" id=15]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 5, 0.0505799, 13 )

[node name="Spatial" type="Spatial"]

[node name="HUD" parent="." instance=ExtResource( 10 )]

[node name="WinLossController" type="Spatial" parent="."]
script = ExtResource( 15 )

[node name="PauseController" type="Spatial" parent="."]
pause_mode = 2
script = ExtResource( 4 )

[node name="VFXController" type="Spatial" parent="."]
script = ExtResource( 5 )

[node name="TrainController" type="Spatial" parent="."]
script = ExtResource( 7 )

[node name="Start" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0.156, 3 )

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0.5, 4.5, 0 )
environment = ExtResource( 13 )
current = true
script = ExtResource( 6 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( -0.443842, -0.865564, 0.231958, -0.51586, 0.458456, 0.723676, -0.73273, 0.201539, -0.649991, 3.37471, 1.62158, -0.0127292 )
shadow_enabled = true
directional_shadow_normal_bias = 0.0

[node name="Grid" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, 0.5 )

[node name="Terrain" type="GridMap" parent="Grid"]
mesh_library = ExtResource( 12 )
cell_size = Vector3( 1, 1, 1 )
cell_center_y = false
data = {
"cells": PoolIntArray( 0, 0, 0, 1, 0, 0, 2, 0, 1441792, 3, 0, 1441792, 4, 0, 1441796, 65531, 0, 1048580, 65532, 0, 0, 65533, 0, 0, 65534, 0, 0, 65535, 0, 0, 0, 1, 0, 1, 1, 0, 2, 1, 1441792, 3, 1, 1441792, 4, 1, 1441796, 65531, 1, 1048580, 65532, 1, 0, 65533, 1, 0, 65534, 1, 0, 65535, 1, 0, 0, 2, 655364, 1, 2, 655364, 2, 2, 655364, 3, 2, 655364, 4, 2, 1441794, 65531, 2, 655362, 65532, 2, 655364, 65533, 2, 655364, 65534, 2, 655364, 65535, 2, 655364, 0, 65519, 655360, 1, 65519, 655360, 2, 65519, 655360, 3, 65519, 655360, 4, 65519, 1441796, 65531, 65519, 1048580, 65532, 65519, 655360, 65533, 65519, 655360, 65534, 65519, 655360, 65535, 65519, 655360, 0, 65520, 655360, 1, 65520, 655360, 2, 65520, 655360, 3, 65520, 655360, 4, 65520, 1441796, 65531, 65520, 1048580, 65532, 65520, 655360, 65533, 65520, 655360, 65534, 65520, 655360, 65535, 65520, 655360, 0, 65521, 655360, 1, 65521, 655360, 2, 65521, 655360, 3, 65521, 655360, 4, 65521, 1441796, 65531, 65521, 1048580, 65532, 65521, 655360, 65533, 65521, 655360, 65534, 65521, 655360, 65535, 65521, 655360, 0, 65522, 655360, 1, 65522, 655360, 2, 65522, 655360, 3, 65522, 655360, 4, 65522, 1441796, 65531, 65522, 1048580, 65532, 65522, 655360, 65533, 65522, 655360, 65534, 65522, 655360, 65535, 65522, 655360, 0, 65523, 655360, 1, 65523, 655360, 2, 65523, 655360, 3, 65523, 655360, 4, 65523, 1441796, 65531, 65523, 1048580, 65532, 65523, 655360, 65533, 65523, 655360, 65534, 65523, 655360, 65535, 65523, 655360, 0, 65524, 655360, 1, 65524, 655360, 2, 65524, 655360, 3, 65524, 1441792, 4, 65524, 1441796, 65531, 65524, 1048580, 65532, 65524, 655360, 65533, 65524, 655360, 65534, 65524, 655360, 65535, 65524, 655360, 0, 65525, 655360, 1, 65525, 655360, 2, 65525, 655360, 3, 65525, 1441792, 4, 65525, 1441796, 65531, 65525, 1048580, 65532, 65525, 655360, 65533, 65525, 655360, 65534, 65525, 655360, 65535, 65525, 655360, 0, 65526, 655360, 1, 65526, 655360, 2, 65526, 655360, 3, 65526, 1441792, 4, 65526, 1441796, 65531, 65526, 1048580, 65532, 65526, 655360, 65533, 65526, 655360, 65534, 65526, 655360, 65535, 65526, 655360, 0, 65527, 655360, 1, 65527, 655360, 2, 65527, 655360, 3, 65527, 655360, 4, 65527, 1441796, 65531, 65527, 1048580, 65532, 65527, 655360, 65533, 65527, 655360, 65534, 65527, 655360, 65535, 65527, 655360, 0, 65528, 655360, 1, 65528, 655360, 2, 65528, 655360, 3, 65528, 655360, 4, 65528, 1441796, 65531, 65528, 1048580, 65532, 65528, 655360, 65533, 65528, 655360, 65534, 65528, 655360, 65535, 65528, 655360, 0, 65529, 655360, 1, 65529, 655360, 2, 65529, 655360, 3, 65529, 655360, 4, 65529, 1441796, 65531, 65529, 1048580, 65532, 65529, 655360, 65533, 65529, 655360, 65534, 65529, 655360, 65535, 65529, 655360, 0, 65530, 655360, 1, 65530, 655360, 2, 65530, 655360, 3, 65530, 655360, 4, 65530, 1441796, 65531, 65530, 1048580, 65532, 65530, 655360, 65533, 65530, 655360, 65534, 65530, 655360, 65535, 65530, 655360, 0, 65531, 655360, 1, 65531, 655360, 2, 65531, 655360, 3, 65531, 655360, 4, 65531, 1441796, 65531, 65531, 1048580, 65532, 65531, 655360, 65533, 65531, 655360, 65534, 65531, 655360, 65535, 65531, 655360, 0, 65532, 655360, 1, 65532, 655360, 2, 65532, 655360, 3, 65532, 655360, 4, 65532, 1441796, 65531, 65532, 1048580, 65532, 65532, 655360, 65533, 65532, 655360, 65534, 65532, 655360, 65535, 65532, 655360, 0, 65533, 0, 1, 65533, 0, 2, 65533, 0, 3, 65533, 1441792, 4, 65533, 1441796, 65531, 65533, 1048580, 65532, 65533, 0, 65533, 65533, 0, 65534, 65533, 0, 65535, 65533, 0, 0, 65534, 0, 1, 65534, 0, 2, 65534, 0, 3, 65534, 1441792, 4, 65534, 1441796, 65531, 65534, 1048580, 65532, 65534, 0, 65533, 65534, 0, 65534, 65534, 0, 65535, 65534, 0, 0, 65535, 0, 1, 65535, 0, 2, 65535, 1441792, 3, 65535, 1441792, 4, 65535, 1441796, 65531, 65535, 1048580, 65532, 65535, 0, 65533, 65535, 0, 65534, 65535, 0, 65535, 65535, 0 )
}
__meta__ = {
"_editor_clip_": 0
}

[node name="ScenerySmall" type="GridMap" parent="Grid"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00878954, 0.100001, 0.00289869 )
mesh_library = ExtResource( 1 )
cell_size = Vector3( 1, 1, 1 )
cell_center_y = false
cell_scale = 0.5
data = {
"cells": PoolIntArray( 3, 0, 655368, 65532, 0, 1441797, 0, 65533, 1441798, 3, 65534, 1441793 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, 0, 0 )
}

[node name="SceneryLarge" type="GridMap" parent="Grid"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0 )
mesh_library = ExtResource( 1 )
cell_size = Vector3( 1, 1, 1 )
cell_center_y = false
data = {
"cells": PoolIntArray( 3, 0, 1441796, 65532, 65533, 1441800, 65533, 65533, 655360, 3, 65535, 1441796 )
}
__meta__ = {
"_editor_clip_": 0
}

[node name="Track" type="Spatial" parent="Grid"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0.1, 0.5 )

[node name="track-straight" parent="Grid/Track" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, 0, 1 )

[node name="track-straight2" parent="Grid/Track" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, 0, 0 )

[node name="track-straight3" parent="Grid/Track" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, 0, -1 )

[node name="track-straight4" parent="Grid/Track" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, 0, -2 )

[node name="track-straight5" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -2.5 )

[node name="track-straight6" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -3.5 )

[node name="track-straight7" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -4.5 )

[node name="track-straight8" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -5.5 )

[node name="track-straight9" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -6.5 )

[node name="track-straight10" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -7.5 )

[node name="track-straight11" parent="Grid" instance=ExtResource( 9 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.5, 0.1, -8.5 )

[node name="Enemy" type="Spatial" parent="Grid"]

[node name="turret-small" parent="Grid/Enemy" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, -4.5 )

[node name="turret-small2" parent="Grid/Enemy" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, -1.5 )

[node name="turret-small3" parent="Grid/Enemy" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, -7.5 )

[node name="logo" parent="." instance=ExtResource( 8 )]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.1, -2 )
visible = false

[node name="CinematicCamera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.02, 0.379, 2.149 )
visible = false
environment = ExtResource( 13 )
script = ExtResource( 2 )

[node name="Ground" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0, 0.5 )
script = ExtResource( 3 )

[node name="CollisionShape" type="CollisionShape" parent="Ground"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, -10 )
shape = SubResource( 1 )

[node name="Music" type="AudioStreamPlayer" parent="."]
pause_mode = 2
stream = ExtResource( 14 )
autoplay = true

[connection signal="requested_car" from="HUD" to="TrainController" method="on_hud_requested_car"]
[connection signal="requested_track" from="HUD" to="TrainController" method="on_hud_requested_track"]
[connection signal="game_lost" from="WinLossController" to="HUD" method="on_game_lost"]
[connection signal="game_won" from="WinLossController" to="HUD" method="on_game_won"]
[connection signal="pause_state_changed" from="PauseController" to="HUD" method="on_pause_state_changed"]
[connection signal="integrity_changed" from="TrainController" to="HUD" method="on_train_integrity_changed"]
[connection signal="body_entered" from="Ground" to="Ground" method="on_body_entered"]
